---
title: Search
description: Full-text search functionality in Leaf
---

# Search

Leaf includes a powerful, fast, and lightweight full-text search system built into every documentation site.

## Features

- **‚ö° Fast Response** - <50ms search response on typical hardware
- **üîç Full-Text** - Searches through all content, not just titles
- **üéØ Relevance Ranking** - Most relevant results appear first
- **‚å®Ô∏è Keyboard Navigation** - Navigate results with arrow keys
- **üì± Mobile Friendly** - Works on all devices
- **üåô Theme Aware** - Matches your site theme
- **üíæ Offline Support** - Search works offline after initial page load

## Using Search

### Opening Search

Press `Cmd+K` (Mac) or `Ctrl+K` (Windows/Linux) to open the search dialog from anywhere on your site.

Alternatively, click the search icon in the navigation bar.

### Searching

Start typing your query. Results appear as you type:

1. **Title matches** - Pages with matching titles appear first
2. **Content matches** - Pages with matching content follow
3. **Excerpt preview** - See context around your search term

### Navigation

- **‚Üë/‚Üì Arrow keys** - Move between results
- **Enter** - Navigate to selected result
- **Esc** - Close search dialog

## How It Works

Leaf generates a search index during the build process:

1. **Indexing** - All markdown content is processed
2. **Tokenization** - Content is split into searchable terms
3. **Weighting** - Titles and headings get higher relevance
4. **Compression** - Index is optimized for size
5. **Distribution** - Index is bundled with your site

The entire process happens at build time, so there's:
- ‚úÖ No server required
- ‚úÖ No external API calls
- ‚úÖ No tracking or analytics
- ‚úÖ Privacy-friendly

## Search Index

The search index is automatically generated from your content:

```typescript
{
  "documents": [
    {
      "id": "/guide/installation",
      "title": "Installation",
      "description": "How to install Leaf",
      "content": "Full page content...",
      "headings": ["Prerequisites", "Quick Install", ...]
    },
    // ... more documents
  ]
}
```

### What Gets Indexed

- **Titles** - Page titles (highest weight)
- **Headings** - All H1-H6 headings
- **Content** - All paragraph text
- **Descriptions** - Meta descriptions
- **Code comments** - Comments in code blocks
- **Links** - Link text

### What Doesn't Get Indexed

- **Code syntax** - Code blocks (except comments)
- **HTML tags** - Raw HTML is stripped
- **Special characters** - Only alphanumeric text

## Performance

The search system is designed for performance:

| Metric | Value |
|--------|-------|
| **Index Size** | ~5-10KB per page |
| **Load Time** | <50ms |
| **Search Speed** | <10ms |
| **Memory Usage** | <5MB |

For a typical documentation site with 100 pages:
- **Total index size**: ~500KB - 1MB (compressed)
- **Download time**: <1s on 3G
- **Parsing time**: <100ms

## Configuration

Search is enabled by default. To customize:

```typescript
import { defineConfig } from "@sylphx/leaf";

export default defineConfig({
  search: {
    enabled: true,

    // Limit number of results
    maxResults: 10,

    // Minimum query length
    minQueryLength: 2,

    // Boost certain fields
    boost: {
      title: 4,
      heading: 2,
      content: 1
    },

    // Exclude patterns
    exclude: [
      "/internal/**",
      "/drafts/**"
    ]
  }
});
```

### Options

#### enabled

- **Type:** `boolean`
- **Default:** `true`

Enable or disable search functionality.

#### maxResults

- **Type:** `number`
- **Default:** `10`

Maximum number of search results to display.

#### minQueryLength

- **Type:** `number`
- **Default:** `2`

Minimum characters required before searching.

#### boost

- **Type:** `object`

Relevance boost for different content types:
- `title` - Page titles (default: 4)
- `heading` - Headings H1-H6 (default: 2)
- `content` - Body content (default: 1)

#### exclude

- **Type:** `string[]`

Glob patterns for pages to exclude from search.

## Advanced Features

### Fuzzy Matching

Search handles typos and close matches:

- `reactpres` ‚Üí finds "Leaf"
- `instalation` ‚Üí finds "installation"
- `confguration` ‚Üí finds "configuration"

### Multi-Word Search

Search for multiple words (AND logic):

- `install react` ‚Üí finds pages with both terms
- `dark mode theme` ‚Üí finds pages about dark mode themes

### Phrase Search

Use quotes for exact phrases:

- `"getting started"` ‚Üí exact match only
- `"npm install"` ‚Üí exact command

### Prefix Search

Search finds words starting with your query:

- `conf` ‚Üí finds "config", "configuration", "configure"
- `react` ‚Üí finds "Leaf", "React", "reactive"

## Search Tips

1. **Be specific** - More words narrow results
2. **Use quotes** - For exact phrases
3. **Check spelling** - Fuzzy matching helps but isn't perfect
4. **Try variations** - "install" vs "installation"
5. **Use keywords** - Technical terms work better than common words

## Keyboard Shortcuts

Global shortcuts:

| Key | Action |
|-----|--------|
| `Cmd/Ctrl + K` | Open search |
| `Esc` | Close search |

Within search dialog:

| Key | Action |
|-----|--------|
| `‚Üë` | Previous result |
| `‚Üì` | Next result |
| `Enter` | Go to result |
| `Esc` | Close dialog |

## Custom Search UI

You can customize the search interface:

```typescript
import { Search } from "@sylphx/leaf-theme-default";

// Custom search component
export function CustomSearch() {
  return (
    <Search
      placeholder="Search documentation..."
      maxResults={15}
      showDescription={true}
      showPath={true}
    />
  );
}
```

### Styling

Override search styles with CSS:

```css
.search-dialog {
  /* Dialog container */
}

.search-input {
  /* Search input field */
}

.search-results {
  /* Results container */
}

.search-result {
  /* Individual result */
}

.search-result-title {
  /* Result title */
}

.search-result-excerpt {
  /* Result excerpt/preview */
}

.search-result-path {
  /* Result breadcrumb */
}
```

## Analytics

Track search queries and improve your content:

```typescript
export default defineConfig({
  search: {
    onSearch: (query, results) => {
      // Log search analytics
      console.log(`Searched for: ${query}`);
      console.log(`Found: ${results.length} results`);

      // Track with analytics service
      analytics.track("search", {
        query,
        resultCount: results.length
      });
    }
  }
});
```

## Troubleshooting

### Search not working

1. **Check if index generated** - Look for `search-index.json` in dist
2. **Verify content** - Ensure pages have content to index
3. **Check console** - Look for JavaScript errors

### No results found

1. **Check spelling** - Try different variations
2. **Simplify query** - Use fewer words
3. **Check if page excluded** - Review `exclude` config

### Slow search

1. **Large index** - Consider excluding some content
2. **Too many results** - Reduce `maxResults`
3. **Old browser** - Search requires modern JavaScript

### Index too large

Reduce index size:

```typescript
export default defineConfig({
  search: {
    // Exclude less important content
    exclude: [
      "/changelog/**",
      "/archive/**"
    ],

    // Limit excerpt length
    excerptLength: 100,

    // Don't index code blocks
    indexCode: false
  }
});
```

## Comparison with Hosted Solutions

Leaf uses local client-side search. Hosted solutions offer different tradeoffs:

| Feature | Leaf (Local) | Algolia | Typesense |
|---------|--------------|---------|-----------|
| **Infrastructure** | No server needed | Hosted API | Cloud or self-hosted |
| **Cost** | $0 (client-side) | Free tier, then $0.50/1k requests | Cloud: $0.03/hr, Self-host: $0 |
| **Setup** | Zero config | API key + integration | Server setup or cloud account |
| **Privacy** | 100% client-side | Data sent to Algolia | Self-hosted option available |
| **Offline Support** | ‚úÖ Yes | ‚ùå No | ‚ùå No (needs server) |
| **Search Features** | Fuzzy, full-text | Advanced (typo tolerance, facets) | Advanced (filtering, faceting) |

**Key Difference:** Leaf is client-side (no infrastructure), while Algolia/Typesense are server-side (more features, requires hosting).

## Best Practices

1. **Write descriptive titles** - They carry the most weight
2. **Use clear headings** - Break content into sections
3. **Add descriptions** - Help users find content
4. **Avoid duplication** - Confuses search results
5. **Test search** - Try common queries

## Future Enhancements

Coming soon:

- üîÆ AI-powered semantic search
- üè∑Ô∏è Tag-based filtering
- üìä Search analytics dashboard
- üåê Multi-language support
- üé§ Voice search

## Next Steps

- [Configure your site](/guide/configuration)
- [Customize the theme](/guide/theming)
- [API reference](/api/config)
